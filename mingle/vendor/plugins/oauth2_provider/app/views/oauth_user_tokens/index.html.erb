<%# 
Copyright 2020 ThoughtWorks, Inc.

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <https://www.gnu.org/licenses/agpl-3.0.txt>.
-%>
<div id="oauth_page">
    <%= render_help_link('OAuth 2.0 User Token', :class => 'page-help-at-action-bar') if defined?(render_help_link)  %>

<div class="page_header"><h1 class="entity_title">OAuth Tokens</h1></div>

<div class="content_wrapper_outer">
    <div class="content_wrapper_inner">
<% if @tokens.empty? %>
  <div class="info-box">There are no tokens.</div>
<% else %>
  <table id="oauth_user_token_table" class="list_table">
    <tr>
      <th>Client</th>
      <th>Action</th>
    </tr>
    <% @tokens.each do |token| -%>
      <tr>
        <td><%= h(token.oauth_client.name) %></td>
        <td><%= link_to content_tag(:span, "Delete"),
            {:action => :revoke, :token_id => token.id, :controller => 'oauth_user_tokens'},
            {:confirm => 'Are you sure?', :method => :delete,  :class => 'delete_link', :title => 'Click to revoke this token'}%></td>
      </tr>
    <% end -%>
  </table>
<% end %>
</div>
</div>
</div>
